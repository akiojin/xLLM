#!/usr/bin/env sh
set -e

if [ "${HUSKY:-}" = "0" ]; then
  echo "HUSKY=0 is not allowed in this repo." >&2
  exit 1
fi

# commitlint is optional for xLLM; skip if unavailable
if command -v commitlint >/dev/null 2>&1; then
  commitlint --edit "$1"
elif command -v npx >/dev/null 2>&1; then
  npx --no-install commitlint --edit "$1" || echo "⚠️  commitlint not installed, skipping"
else
  echo "⚠️  commitlint not installed, skipping"
fi
